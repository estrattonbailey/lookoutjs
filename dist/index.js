(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.index||(g.index={})).js=f()}})(function(){var define,module,exports;var proto={listeners:{},watch:function(key,cb){var key=key||"all";if(!this.listeners[key]){this.listeners[key]={queue:[]}}this.listeners[key].queue.push(cb)},publish:function(key,val){if(!this.listeners[key])return;this.listeners[key].queue.forEach(function(fn,i){fn(val)})}};function deepSet(source,target,key,keys){keys.forEach(function(k){target[key][k]=source[key][k];Object.defineProperty(target[key],k,{set:function(val){Object.defineProperty(this,k,{value:val});target.publish(k,val)},get:function(){return source[key][k]}})})}function Lookout(source){var children,target=Object.create(proto);Object.keys(source).forEach(function(key){target[key]=source[key];children=source[key];Object.defineProperty(target,key,{set:function(val){Object.defineProperty(this,key,{value:val});this.publish(key,val)},get:function(){return source[key]}});if(typeof children==="object"){deepSet(source,target,key,Object.keys(children))}});return target}return Lookout});
